<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://editorCaption"
        class="com.audimex.dashboard.web.dashboardwidget.DashboardWidgetEdit"
        datasource="dashboardWidgetDs"
        focusComponent="fieldGroup"
        messagesPack="com.audimex.dashboard.web.dashboardwidget">
    <dsContext>
        <datasource id="dashboardWidgetDs"
                    class="com.audimex.dashboard.entity.DashboardWidget"
                    view="dashboardWidget-view">
            <collectionDatasource id="widgetParametersDs" property="parameters"/>
        </datasource>
    </dsContext>
    <dialogMode height="AUTO"
                width="AUTO"/>
    <layout expand="windowActions"
            spacing="true">
        <fieldGroup id="fieldGroup"
                    datasource="dashboardWidgetDs">
            <column width="450px">
                <field id="widgetId"
                       property="widgetId"/>
                <field id="caption"
                       property="caption"/>
                <field id="icon"
                       property="icon"/>
                <field id="description"
                       property="description"/>
                <field id="widgetViewType"
                       property="widgetViewType"
                       custom="true"
                       required="true"/>
                <field id="entityTypeField"
                       property="entityType"
                       custom="true"/>
                <field id="frameId"
                       property="frameId"
                       custom="true"/>
                <field id="report"
                       property="report"
                       custom="true"/>
            </column>
        </fieldGroup>
        <table id="parametersTable" width="550px" height="250px">
            <actions>
                <action id="create"/>
                <action id="edit"/>
                <action id="remove"/>
                <action id="up"
                        icon="font-icon:ARROW_UP"
                        invoke="parameterUp"
                        trackSelection="true"/>
                <action id="down"
                        icon="font-icon:ARROW_DOWN"
                        invoke="parameterDown"
                        trackSelection="true"/>
            </actions>
            <columns>
                <column id="orderNum"
                        visible="false"/>
                <column id="name"
                        sortable="false"/>
                <column id="alias"
                        sortable="false"/>
                <column id="parameterType"
                        sortable="false"/>
                <column id="referenceToEntity.metaClassName"
                        sortable="false"/>
                <column id="referenceToEntity.viewName"
                        sortable="false"/>
            </columns>
            <rows datasource="widgetParametersDs"/>
            <buttonsPanel>
                <button id="btnCreate"
                        action="parametersTable.create"/>
                <button id="btnEdit"
                        action="parametersTable.edit"/>
                <button id="btnRemove"
                        action="parametersTable.remove"/>
                <button id="btnUp"
                        action="parametersTable.up"/>
                <button id="btnDown"
                        action="parametersTable.down"/>
            </buttonsPanel>
        </table>
        <hbox id="windowActions"
              spacing="true"
              stylename="c-extended-edit-window-actions">
            <button id="windowCommitAndClose"
                    action="windowCommitAndClose"
                    icon="theme://actions.Editor.Ok.icon"/>
            <button id="windowCommit"
                    action="windowCommit"/>
            <button id="windowClose"
                    action="windowClose"
                    icon="theme://actions.Editor.Cancel.icon"/>
            <button id="propagate"
                    caption="msg://dashboard.button.propagate"
                    invoke="propagateWidgetChanges"
                    icon="font-icon:MAIL_FORWARD"/>
        </hbox>
    </layout>
</window>
